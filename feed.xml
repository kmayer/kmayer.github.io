<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ken Mayer</title>
    <description>Ramblings about technology, traveling, sailing, family, entrepeneurship. Mostly ramblings.
</description>
    <link>http://blog.bitwrangler.com/</link>
    <atom:link href="http://blog.bitwrangler.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Mon, 05 Sep 2016 14:25:47 -0700</pubDate>
    <lastBuildDate>Mon, 05 Sep 2016 14:25:47 -0700</lastBuildDate>
    <generator>Jekyll v3.2.1</generator>
    
      <item>
        <title>Guidelines for Using Pivotal Tracker</title>
        <description>&lt;p&gt;I am often asked about the meaning of things in Pivotal Tracker, such as “What’s the difference between a bug and a chore?” Or, “How can I tell the difference between a bug and a feature?” Another oldie but a goodie is, “What story should I pick from the backlog?” Here are my biased answers.&lt;/p&gt;

&lt;p&gt;But first:&lt;/p&gt;

&lt;h2 id=&quot;a-groomed-backlog-is-no-substitute-for-good-judgement&quot;&gt;A Groomed Backlog is No Substitute for Good Judgement&lt;/h2&gt;

&lt;p&gt;No matter what you might hope, there is no substitute for good judgement. You should always ask yourself, “What is in the best interest of PacerPro?” If you can’t answer that question, then stop, go find someone who &lt;em&gt;does&lt;/em&gt; know before continuing. Great employees will not only do what’s expected of them, but also do what is best for the company.&lt;/p&gt;

&lt;h2 id=&quot;tracker-stories-are-focused-on-delivering-business-value&quot;&gt;Tracker Stories Are Focused on Delivering Business Value&lt;/h2&gt;

&lt;p&gt;Tracker has four and &lt;em&gt;only&lt;/em&gt; four types of stories: &lt;code class=&quot;highlighter-rouge&quot;&gt;Feature&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Bug&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Chore&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Release&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;a-feature-has-quantifiable-business-value&quot;&gt;A “feature” has quantifiable business value&lt;/h3&gt;

&lt;p&gt;Here’s my formal definition:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“A &lt;em&gt;feature&lt;/em&gt; is a story that was requested by the [client] stakeholder and has quantifiable business value.”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;There are some really important concepts to consider here. The story &lt;em&gt;must&lt;/em&gt; come from a stakeholder, that is, someone who can make decisions based on &lt;em&gt;business priorities&lt;/em&gt;. As a general rule, engineers should not request feature stories, not because they can’t, but because they don’t generally see the business side of things.&lt;label for=&quot;business-value&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;business-value&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;I don’t keep a lot of secrets. I’ll try to explain the back-story if I can. If everyone knows the business value and complexity of a story, then we can all help ensure that we’re maximizing business value for the company. &lt;/span&gt; Let’s be honest, however, stakeholders rarely write &lt;em&gt;good&lt;/em&gt; stories, so in general, stories will be written in partnership (pairing) with them. As CTO, I will often trade my engineering hat for a business hat and write feature stories. You may not see the hat switch, but it is there. Ask me, “Which hat are you wearing?” if you are unsure. On the other hand, if you can’t make a judgement based on business priorities, then you shouldn’t be writing stories, either.&lt;/p&gt;

&lt;p&gt;The other component of &lt;em&gt;feature&lt;/em&gt; stories is that they have &lt;em&gt;quantifiable business value&lt;/em&gt;. Stories cost time to deliver. Time that could be spent on other stories. We want to maximize the financial leverage of our work so that we deliver the most value for the least cost. There’s some local maxima at work here, and since our business landscape changes so quickly, we’re only hoping for something measurable in the 90 days after delivery. This is a nod to &lt;a href=&quot;http://firstround.com/review/This-Product-Prioritization-System-Nabbed-Pandora-More-Than-70-Million-Active-Monthly-Users-with-Just-40-Engineers/&quot;&gt;Pandora’s planning criterion&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“What would be stupid not to do in the next 90 days.”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;During planning sessions you may hear me ask the stakeholders, “What’s the business value of this story, in rough dollars?” If all I get in reply is hemming and hawing, I will politely but firmly push back; This story is not ready, or not really &lt;em&gt;that&lt;/em&gt; high a priority. There’s an old definition of “urgency,” something that is time critical, but you can have &lt;em&gt;unimportant&lt;/em&gt; urgencies. Those stories are not the most important ones to complete. You, as engineers, should know what the quantifiable business value is for a story, and you should ask if you don’t know.&lt;label for=&quot;research-stories&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;research-stories&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;Sometimes, we won’t be able to estimate a story’s cost without some research, perhaps some spiking. I’ll break that out into a separate story whose sole output is an estimated cost of the feature. &lt;/span&gt;&lt;/p&gt;

&lt;h3 id=&quot;a-bug-is-a-defect-introduced-during-the-delivery-of-a-feature&quot;&gt;A “bug” is a defect introduced during the delivery of a feature&lt;/h3&gt;

&lt;p&gt;Bugs are a drag on velocity.&lt;label for=&quot;velocity&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;velocity&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;See my earlier article on velocity: “&lt;a href=&quot;/2013/02/19/its-the-volatility-that-will-kill-you.html&quot;&gt;It’s the Volatility that Will Kill You&lt;/a&gt;” &lt;/span&gt; It slows down our ability to deliver feature stories. There’s really no such thing as zero-defect software and achieving that becomes asymptotically expensive. So we want a process where we minimize bugs for a reasonable expense. That’s why we have tests, continuous integration testing, code quality metrics, quality assurance and multiple staged servers, to name a few. That’s also why we don’t maintain a JIRA installation; it costs more to maintain than we got in reducing our defect rate.&lt;/p&gt;

&lt;p&gt;Not all bugs are equal. We prioritize them by business value, too. We can measure value in terms of loss of customers, reduced adoption rate, or even a hit to our brand value. Some bugs are more expensive to fix than others, too. This is one of the pain points of using Pivotal Tracker; there’s no direct way to indicate the &lt;em&gt;cost&lt;/em&gt; of &lt;em&gt;fixing&lt;/em&gt; the bug. In this respect, in the eyes of Tracker, all bugs are equal. I’ve found this not to be true in real life. Some bugs are easy to fix, or easy to fix &lt;em&gt;right now&lt;/em&gt; while we still have &lt;em&gt;context&lt;/em&gt; to fix the bug. Bugs to fix in the backlog are in roughly the priority to be fixed, but there’s usually a lot more wiggle room than in feature stories.&lt;/p&gt;

&lt;h3 id=&quot;a-release-is-a-time-constraint&quot;&gt;A “release” is a time constraint&lt;/h3&gt;

&lt;p&gt;Tracker doesn’t set many deadlines because most deadlines are bogus. Well, arbitrary. Okay, bullshit. That’s because when they are imposed from above, or don’t reflect any business realities, or don’t adjust to the changing landscape of our business, we’re not maximizing value. And things change, fast. That’s what “agile” means, right? This is not to say that “agile” is an excuse not to deliver on time, either. We want to be &lt;em&gt;realistic&lt;/em&gt; about our deliveries. Hence we have “releases.” They &lt;em&gt;can&lt;/em&gt; answer two important questions:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;We have an “epic” that must be delivered by an externally imposed date. Will we make it, with confidence?&lt;/li&gt;
  &lt;li&gt;How long will an “epic” take to complete? Is the overall cost worth it? Will it impact other commitments?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;There are &lt;em&gt;lots&lt;/em&gt; of external events that are beyond our direct control: Trade shows, press release dates, legal contracts, holidays, even election day!&lt;/p&gt;

&lt;p&gt;Finally, and, least of all&lt;/p&gt;

&lt;h3 id=&quot;chores-are-internal-stories-that-must-be-done-but-have-no-quantifiable-business-value&quot;&gt;“Chores” are internal stories that must be done, but have no quantifiable business value&lt;/h3&gt;

&lt;p&gt;Chores are closely related to bugs, in that they don’t have points, so they are also a drag on velocity. Consider them “the cost of doing business.” Where they differ is that chores do not arise as a defect when delivering a feature. They are usually internal engineering work, such as setting up new servers, or renewing an SSL certificate. We also use them as an &lt;em&gt;ad hoc&lt;/em&gt; to-do list, e.g. when we need to provision new users for a client. Those requests &lt;em&gt;could&lt;/em&gt; be seen as help desk tickets&lt;label for=&quot;help-desk&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;help-desk&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;I need to write a whole other post about help desk operations. &lt;/span&gt;, and I may change my mind on this, but for now we’re just going with the flow.&lt;/p&gt;

&lt;p&gt;One thing that I am adamantly opposed to are &lt;em&gt;chores to address technical debt&lt;/em&gt;. Stories like “code reviews” or “large refactoring.” They are part of our normal story workflow and &lt;em&gt;not&lt;/em&gt; an after-thought. If a big refactor is necessary for a story, then so be it. Add that cost to the complexity of the story.&lt;label for=&quot;refactoring-not-a-story&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;refactoring-not-a-story&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;See, &lt;a href=&quot;http://ronjeffries.com/xprog/articles/refactoring-not-on-the-backlog/&quot;&gt;“Refactoring – Not on the backlog!”&lt;/a&gt; &lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&quot;what-should-i-do-next&quot;&gt;What Should I Do Next?&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;“The Most Important Thing”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In theory always try to take the next &lt;em&gt;ready&lt;/em&gt; story off the &lt;em&gt;top&lt;/em&gt; of the &lt;em&gt;backlog&lt;/em&gt;. In practice it is not always so simple. It goes back to judgement. Before you click the start button, review the story for readiness and business value. Ask yourself, “Self? Has the business landscape &lt;em&gt;changed&lt;/em&gt; since the last time we looked at this story? Is it truly the &lt;em&gt;most important thing to do&lt;/em&gt;?” You have the responsibility and authority to “pull the yellow cord&lt;label for=&quot;kanban&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;kanban&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;A kanban concept. When there is trouble on an assembly line, any worker is empowered to sound an alarm by pulling a bright yellow cord. Anyone available, including managers, rush to the trouble spot to correct the problem and keep the line running. Later, there would be a &lt;em&gt;post mortem&lt;/em&gt; to prevent the problem from happening again. &lt;/span&gt;.”&lt;/p&gt;

&lt;h3 id=&quot;start--started&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;(START) =&amp;gt; [Started]&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;Pressing the (Start) button commits you to see the story through delivery and acceptance. You are empowered to choose any solution path that, in your professional judgement, is the most cost effective (in terms of time, resources and maintainability). You are also shielded from working on any other story until the current story is completed (or reasonably blocked).&lt;label for=&quot;scheduling&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;scheduling&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;Let’s say that you’ve finished merging and are waiting for CI to deploy to staging for QA. It’s a good time to take a break and celebrate, but if you want to kill off a few Zendesk tickets while you’re waiting, go for it. Just don’t lose track of the main story. &lt;/span&gt; There’s ample research that shows that context switching costs &lt;em&gt;more&lt;/em&gt; than just doing one thing, well.&lt;label for=&quot;context-switching&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;context-switching&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;&lt;a href=&quot;https://www.psychologytoday.com/blog/brain-wise/201209/the-true-cost-multi-tasking&quot;&gt;The True Cost of Multi Tasking&lt;/a&gt;, “Psychology Today”, September 18, 2012 &lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;newthought&quot;&gt;Blocked!&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;When a story gets blocked, you’re first priority is to unblock it. If that’s not possible, add the &lt;code class=&quot;highlighter-rouge&quot;&gt;blocked&lt;/code&gt; tag to the story. Announce that you’re blocked on Slack#engineering. Set a time, at regular intervals, to check up on the blockage. Then, move on to the next story. Announce the blockage at the morning Stand-Up.&lt;/p&gt;

&lt;h3 id=&quot;finish--finished&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;(Finish) =&amp;gt; [Finished]&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;Pressing the (Finish) button tells the team that development work is done and that a pull-request is pending on GitHub for review. You can start the pull-request at any time, not just at the end. There is a process pattern where you start the pull-request as soon as you create the story branch. I like it because I get early feedback from CircleCI and CodeClimate. YMMV. Announce the pull-request and &lt;em&gt;ask&lt;/em&gt; for feedback. Review criteria will vary, but at a minimum, CI is green, the code adheres to the style-guide (via CodeClimate reports), QA testing on the local development system confirms that the story delivers, &lt;em&gt;in real life&lt;/em&gt;, what was originally requested. This is also a good place to show the team the new functionality at the evening Round-Up.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;newthought&quot;&gt;Merge to master, final QA&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Once everything is “green,” merge to the master branch (our &lt;em&gt;production ready&lt;/em&gt; branch). Re-test the feature on the staging server and run our QA “smoke tests.”&lt;label for=&quot;smoke-tests&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;smoke-tests&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;We have a small suite of integration tests that can run against a ‘live’ server; either staging or production. These tests assure us that we haven’t broken anything critical and that all services are running properly. &lt;/span&gt; You are now ready to deploy to production at your next opportunity. In general, we believe in deploying early and often. Since our deployments &lt;em&gt;do&lt;/em&gt; take the background job runner (&lt;code class=&quot;highlighter-rouge&quot;&gt;Sidekiq&lt;/code&gt;) off-line, use your judgement about mid-day (10am Eastern to 6pm Pacific) deploys. Re-run the smoke tests against the production server.&lt;/p&gt;

&lt;h3 id=&quot;deliver--delivered&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;(Deliver) =&amp;gt; [Delivered]&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;Pressing the (Deliver) button informs the team that the story is now live on production. The story requester is responsible for reviewing the feature and accepting or rejecting it. I expect 99% of the stories to be accepted. Rejecting a story at this point is a process fail: Did you include the requester and stakeholders while developing the feature? Did you ask for design and UX feedback? Did you test it so that you were at least 85% confident of success? Was the story truly “done?”&lt;/p&gt;

&lt;h3 id=&quot;accept--done-or-reject--unstarted&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;(Accept) =&amp;gt; [Done]&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;(Reject) =&amp;gt; [Unstarted]&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;Sometimes, we learn things once the feature is live. That’s okay and not an immediate cause for rejection. Rejection is an indication of a process fail, where we did not deliver the story as envisioned, where there was insufficient communication among the team members. Rejection will trigger a post-mortem and a topic for the next retrospective. On the other hand, if we learn something &lt;em&gt;new&lt;/em&gt;, then create a new bug or feature story. Remember, “bugs are defects that were created during the delivery of a story.” If the story was delivered properly, but it’s not what’s best for the users, create a new feature story and place it appropriately in the backlog, according to its business value.&lt;/p&gt;

&lt;h2 id=&quot;whats-in-the-backlog-and-the-icebox&quot;&gt;What’s in the backlog and the icebox?&lt;/h2&gt;

&lt;p&gt;The backlog contains stories, prioritized according to release dates and value. While we strive to keep a backlog that will support 2-3 weeks of engineering effort, sometimes we fail. I encourage you to speak up about lingering stories that might become critical in the future. These stories are good to bring up during iteration planning.&lt;/p&gt;

&lt;p&gt;The icebox contains stories that have business value in the next 90 days. Everything else isn’t worth keeping. We have a lot of stories with “freezer burn” that I just delete from time to time. You can help by reviewing and tossing the ancient stories.&lt;/p&gt;

&lt;h2 id=&quot;shaddup-already-and-lets-get-to-work&quot;&gt;Shaddup already and let’s get to work!&lt;/h2&gt;

&lt;p&gt;This has been a much longer rant than I intended, but there’s lots of good stuff here. Many thanks to Rob Mee for his brown bag talk, years ago, that inspired the foundation (and of course, hiring me).&lt;/p&gt;
</description>
        <pubDate>Mon, 25 Jul 2016 00:00:00 -0700</pubDate>
        <link>http://blog.bitwrangler.com/2016/07/25/tracker-guidelines.html</link>
        <guid isPermaLink="true">http://blog.bitwrangler.com/2016/07/25/tracker-guidelines.html</guid>
        
        <category>management</category>
        
        <category>agile</category>
        
        
      </item>
    
      <item>
        <title>The Syntax Error That Killed Our Build for a Week.</title>
        <description>&lt;p&gt;Back in the day when I wrote in C and we used X11 with Motif, I was creating a new module based on an existing one, so I just copied and pasted the file from one xterm to another:&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
 &lt;span class=&quot;cm&quot;&gt;/* ... */&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
 &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;L&lt;/span&gt;
 &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;cm&quot;&gt;/* ... */&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;When I tried to compile it, &lt;em&gt;BOOM&lt;/em&gt;. It complained of a syntax error at the form-feed (that’s what the &lt;code class=&quot;highlighter-rouge&quot;&gt;^L&lt;/code&gt; is, ASCII 0xc), which, back in the old days, told the line printer to eject the (gasp) paper page, and start a new one.&lt;/p&gt;

&lt;p&gt;Nowadays, ASCII calls this character “New Page”, but no matter what you call it, it’s whitespace. Compilers don’t even see them. The lexer should have removed it. But there it was, breaking our build, day after day, after day.&lt;/p&gt;

&lt;p&gt;Finally my CTO figured it out. (I’m sorry, Jeff. Obviously, I still bear the scars of this.)&lt;/p&gt;

&lt;p&gt;When I copied the file from one xterm to another, it didn’t copy ASCII 0xc, instead it copied the rendered escape characters, &lt;code class=&quot;highlighter-rouge&quot;&gt;^&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;L&lt;/code&gt; (0x5e 0x4c), which of course, is not parseable.&lt;/p&gt;
</description>
        <pubDate>Sat, 12 Dec 2015 14:02:10 -0800</pubDate>
        <link>http://blog.bitwrangler.com/2015/12/12/the-syntax-error-that-killed-our-build-for-a-week.html</link>
        <guid isPermaLink="true">http://blog.bitwrangler.com/2015/12/12/the-syntax-error-that-killed-our-build-for-a-week.html</guid>
        
        
      </item>
    
      <item>
        <title>Zero Downtime Migrations</title>
        <description>&lt;p&gt;For any sufficiently large application, you want to minimize interruptions to service while deploying new code. This is especially challenging for migrations on Heroku and other Platforms-as-a-Service, where you have a Catch-22 problem; you want to run your migrations, &lt;em&gt;first&lt;/em&gt;, but you can’t run them until you’ve deployed the migrations to production. Usually, at this point, your new migration-dependent features are in the deploy, too. So when your application restarts, and the migration hasn’t run, yet, your poor application will trip some exceptions, and perhaps, create problems for your users. Of course, you could put the app into maintenance mode, but that creates more downtime for your users.&lt;/p&gt;

&lt;p&gt;The technique described here&lt;label for=&quot;goals&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;goals&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;We try &lt;em&gt;very&lt;/em&gt; hard to make migrations non-destructive so there’s no rollback required. The alternative is much more complicated. This also assumes that all QA tests are complete and the next task on your checklist is to deploy to production. &lt;/span&gt; will allow you to gather your migrations into a separate, deployable, commit, that you can run &lt;em&gt;before&lt;/em&gt; you deploy your features, thus minimizing downtime.&lt;/p&gt;

&lt;h2 id=&quot;the-recipe&quot;&gt;The Recipe&lt;/h2&gt;

&lt;h3 id=&quot;on-a-clean-working-copy-of-your-code&quot;&gt;0. On a clean, working copy of your code&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git checkout master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;create-a-patch-file-of-all-migrations-added-since-your-last-production-deploy&quot;&gt;1. Create a patch file of all migrations, added since your last production deploy&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git fetch production
 git diff production/master... -- &lt;span class=&quot;s1&quot;&gt;'db/migrate/'&lt;/span&gt; &amp;gt; patch0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;production&lt;/code&gt; [git] remote is on Heroku. It can be named anything, but we call it that.&lt;/p&gt;

&lt;h3 id=&quot;check-out-a-branch-starting-at-productionmasters-head&quot;&gt;2. Check out a branch, starting at &lt;em&gt;production/master&lt;/em&gt;’s head&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git checkout production/master -b pre-deploy-migrations
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;reset-your-development-database-to-current-state-of-the-production-database&quot;&gt;3. Reset your development database to current state of the production database&lt;/h3&gt;

&lt;p&gt;&lt;label for=&quot;warning&quot; class=&quot;margin-toggle&quot;&gt; ⊕&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;warning&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;marginnote&quot;&gt;&lt;em&gt;WARNING&lt;/em&gt; &lt;/span&gt;This will delete &lt;em&gt;all&lt;/em&gt; of your data in your development environment. But that should not be a problem, right? If it is, you have a problem with your development environment.&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; rake db:reset
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;This also assumes that you’ve been diligent, &lt;em&gt;OCD-diligent&lt;/em&gt;, about keeping your &lt;code class=&quot;highlighter-rouge&quot;&gt;schema.rb&lt;/code&gt; file synchronized with production.&lt;/p&gt;

&lt;h3 id=&quot;apply-the-patch-file&quot;&gt;4. Apply the patch file&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;patch -p1 &amp;lt; patch0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;run-your-migrations&quot;&gt;5. Run your migrations&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rake db:migrate
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;add-and-commit-your-changes&quot;&gt;6. Add and commit your changes&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git add db/migrate/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
 git add db/schema.rb
 git commit -m &lt;span class=&quot;s2&quot;&gt;&quot;pre-deploy migrations only&quot;&lt;/span&gt;
 git status &lt;span class=&quot;c&quot;&gt;# =&amp;gt; should be &quot;reasonably&quot; empty&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;re-run-your-test-suite-to-make-sure-nothing-asplodes&quot;&gt;7. Re-run your test suite to make sure nothing ‘asplodes&lt;/h3&gt;

&lt;p&gt;What happens if your tests &lt;em&gt;do&lt;/em&gt; break? &lt;strong&gt;You might have a destructive migration!&lt;/strong&gt; For example, I recently changed a table from single to polymorphic ownership. Instead of adding the columns, &lt;code class=&quot;highlighter-rouge&quot;&gt;owner_id&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;owner_type&lt;/code&gt;, I renamed &lt;code class=&quot;highlighter-rouge&quot;&gt;organization_id&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;owner_id&lt;/code&gt;. A whole bunch of tests broke. If you continue with these steps, your app will crash when you run the migrations. See Appendix A for some work-arounds.&lt;/p&gt;

&lt;h3 id=&quot;compare-your-commit-against-master&quot;&gt;8. Compare your commit against master&lt;/h3&gt;

&lt;p&gt;Make sure that nothing snuck in by accident. Conceptually, &lt;code class=&quot;highlighter-rouge&quot;&gt;schema.rb&lt;/code&gt; will represent the state of the database after the migrations have been run, and should exactly match the schema that we want to have for our new feature.&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git diff head..origin/master -- &lt;span class=&quot;s1&quot;&gt;'db/migrate/'&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# =&amp;gt; This should return zero changes!&lt;/span&gt;
 git diff head..origin/master -- &lt;span class=&quot;s1&quot;&gt;'db/schema.rb'&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# =&amp;gt; This should return zero changes!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;There &lt;strong&gt;might&lt;/strong&gt; be differences that are okay. You’ll have to do a manual code review to be sure.&lt;/p&gt;

&lt;h3 id=&quot;push-just-this-commit-into-production&quot;&gt;9. Push &lt;strong&gt;just&lt;/strong&gt; this commit into production&lt;/h3&gt;

&lt;p&gt;You can do it by pushing the branch, or merging the commit into your deploy / mainline, rebase it &lt;em&gt;ahead&lt;/em&gt; of your other commits, then push just that sha. We use the &lt;code class=&quot;highlighter-rouge&quot;&gt;heroku_san&lt;/code&gt; gem, so, for us, it is a simple shell command (while still on this branch).&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rake production deploy
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;run-your-migrations-on-your-production-instance&quot;&gt;10. Run your migrations on your production instance&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;heroku run:detached rake db:migrate -r production
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Is this a long running migration? Don’t want Heroku to hang up before your done? What’s this &lt;a href=&quot;https://devcenter.heroku.com/articles/one-off-dynos#running-tasks-in-background&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;run:detached&lt;/code&gt;&lt;/a&gt;?&lt;/p&gt;

&lt;h3 id=&quot;merge-the-branch-into-master&quot;&gt;11. Merge the branch into master&lt;/h3&gt;

&lt;p&gt;It should be a no-op since the code is already there. This is optional, but it keeps git happy for the next deploy.&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git checkout master
 git merge -m &lt;span class=&quot;s2&quot;&gt;&quot;Merge branch 'pre-deploy-migrations'&quot;&lt;/span&gt; pre-deploy-migrations 
 git push origin master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;you-are-ready-to-deploy-to-production&quot;&gt;12. You are ready to deploy to production&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rake production deploy
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;clean-up&quot;&gt;13. Clean up&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git branch -D pre-deploy-migrations
 rm patch0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;bask-in-the-glow-of-your-mastery&quot;&gt;14. Bask in the glow of your mastery!&lt;/h3&gt;

&lt;hr class=&quot;slender&quot; /&gt;

&lt;h2 id=&quot;appendix-a-how-to-handle-deprecated-columns&quot;&gt;Appendix A: How to Handle Deprecated Columns&lt;/h2&gt;

&lt;p&gt;Don’t remove them! That would break your existing production code and any rollbacks become infinitely more difficult. Many practitioners &lt;em&gt;never&lt;/em&gt; remove old columns, but I think that’s bad too. Code costs. Maintaining these extra columns, over time, will cost you time and money. Here’s a way to “soft” remove columns until you are &lt;em&gt;sure&lt;/em&gt; that you won’t need them again. I schedule a chore a few iterations in the future with the task of doing the actual removal.&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;YourModel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# TODO: https://www.pivotaltracker.com/story/show/...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;columns&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reject&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;_column_name_&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
 &lt;span class=&quot;nf&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;appendix-b-copy-data-to-new-columns&quot;&gt;Appendix B: Copy Data to New Columns&lt;/h2&gt;

&lt;p&gt;Making copies to a new column is safe (and “disks” are “cheap”), although it does open a window where your data will be inconsistent. In your migrations, make SQL calls to copy a column from the old to the new. There is a down side to this, especially on very large tables. You want tall, narrow tables for efficiency and performance. This does neither. So plan accordingly.&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;YourMigration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Migration&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;change&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;add_column&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:_table_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:_new_column_name_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:string&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;execute&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SQL&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
      UPDATE _table_name_ SET _new_column_name_ = _old_column_name_;
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;    SQL&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;If you are using MySQL, you might need the help of the Large Hadron Migrator to keep your site up and running while you copy over the data.&lt;/p&gt;
</description>
        <pubDate>Sat, 15 Aug 2015 19:35:44 -0700</pubDate>
        <link>http://blog.bitwrangler.com/2015/08/15/zero-downtime-migrations.html</link>
        <guid isPermaLink="true">http://blog.bitwrangler.com/2015/08/15/zero-downtime-migrations.html</guid>
        
        <category>rails</category>
        
        <category>database</category>
        
        <category>deploy</category>
        
        <category>heroku</category>
        
        
      </item>
    
      <item>
        <title>Unintended consequences (and a disaster averted)</title>
        <description>&lt;p&gt;I want to tell you a scary-as-shit story, mostly so that my friends that have &lt;a href=&quot;http://en.wikipedia.org/wiki/Concealed_carry&quot;&gt;CCW&lt;/a&gt; permits might read it and not get killed by good intentions, because I love you all.&lt;/p&gt;

&lt;p&gt;One morning, I was waiting for the San Francisco-bound &lt;a href=&quot;http://bart.gov&quot;&gt;BART&lt;/a&gt;, as usual. The crowd kept getting thicker and the train was late. There were grumpy rumblings all around. Finally a train rounds the bend, beeps its whistle, and … continues through the station without stopping.&lt;/p&gt;

&lt;p&gt;What. The. Fuck. And then, even more waiting.&lt;/p&gt;

&lt;p&gt;Suddenly, I see several things, pretty much simultaneously, that my brain had trouble processing at the time: The crowd, in a wave starts stepping back from the edge of the platform, revealing two BART police officers, weapons drawn, waving people back. On the opposite platform, another officer is shouldering a rifle pointed in my general direction. And, &lt;em&gt;then&lt;/em&gt;, behind me, an older guy in a green sweatshirt hits the deck, spread-eagled, face down and shouts at the top of his lungs,&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;I HAVE A PERMIT!
I.
HAVE.
A.
PERMIT!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The police approach, frisk the man, remove a revolver from a belt clip, and then politely help him to his feet. There’s a brief check of credentials and a collective sigh of relief that this is not some nut-job ready to rain hell and bullets on a morning commute. I overhear the conversation while the next train rolls up to the platform and starts boarding; apparently an observant citizen saw the revolver tucked into the small of the man’s back and called 911. A bad fashion choice could have cost someone’s life that morning, if any number of things did not go perfectly right.&lt;/p&gt;

&lt;p&gt;I like guns. I’ve used them for sport (target practice), nothing more. I’d be willing to hunt with them (as long as we eat or share what we kill and not let it go to waste). Carrying a concealed weapon scares the shit out of me.&lt;/p&gt;
</description>
        <pubDate>Tue, 06 Jan 2015 19:45:33 -0800</pubDate>
        <link>http://blog.bitwrangler.com/2015/01/06/unintended-consequences-and-a-disaster-averted.html</link>
        <guid isPermaLink="true">http://blog.bitwrangler.com/2015/01/06/unintended-consequences-and-a-disaster-averted.html</guid>
        
        
      </item>
    
      <item>
        <title>Timecop time and database time</title>
        <description>&lt;p&gt;&lt;a href=&quot;https://github.com/travisjeffery/timecop&quot;&gt;Timecop&lt;/a&gt; is a great addition to your testing toolbox, but if you’ve ever tried to use Timecop to interact with a database, and then got the most mysterious of existential errors:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;expected: Sun, 08 Jun 2014 19:18:22 UTC +00:00
     got: Sun, 08 Jun 2014 19:18:22 UTC +00:00
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;I feel your pain.&lt;/p&gt;

&lt;p&gt;The trouble comes from the fact that Timecop is freezing time at the resolution of the native Time class, which on my Mac OS X machine is microseconds (aka “usec”), but the database, in this case MySQL only records time to the second. RSpec is trying to be helpful with its matchers by calling &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;code&amp;gt;&lt;/code&gt;#to_s`, but that hides the significant, sub-second difference.&lt;/p&gt;

&lt;p&gt;Here’s a quick little monkey patch that I added to my spec support:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Timecop&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;database_compatible_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;zone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;change&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;usec: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;This uses a Rails helper to reset the microsecond portion of the time object. So, instead of&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;zone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;now&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Timecop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;I do this:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Timecop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;database_compatible_time&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Timecop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;And no more head scratching. It’s sort of database specific, so your mileage may vary.&lt;/p&gt;

</description>
        <pubDate>Sun, 08 Jun 2014 12:36:35 -0700</pubDate>
        <link>http://blog.bitwrangler.com/2014/06/08/timecop-time-and-database-time.html</link>
        <guid isPermaLink="true">http://blog.bitwrangler.com/2014/06/08/timecop-time-and-database-time.html</guid>
        
        <category>rails</category>
        
        <category>testing</category>
        
        
      </item>
    
      <item>
        <title>The slow road</title>
        <description>&lt;p&gt;Once a week, we run a query on our production system that takes a very long time to complete. Invariably, it times out because the default settings on Heroku are (quite reasonably) for web / API interactions; anything longer than 30 seconds is too long and the connection should be closed to let other requests through. How do you get around this, then? You could set up your &lt;code class=&quot;highlighter-rouge&quot;&gt;database.yml&lt;/code&gt; file so that you connect to your production database from a developer workstation. This is actually quite useful, but opens up a hellacious security hole. Let’s not get started about the consequences of accidentally running &lt;code class=&quot;highlighter-rouge&quot;&gt;rake db:drop:all&lt;/code&gt;! Moreover, you want your system to be automated as much as possible, and that means running your tasks on a Heroku instance. Fortunately, with a little hackery, you can modify the connection timeout settings within your application. Do this carefully, and make sure that it can not leak into your running web application dynos.&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;raw_connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;query_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tap&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;opts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:read_timeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection_pool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;with_connection&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ... long running database queries go here ...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;These settings are database specific, so read the documentation / source. This connection is using the &lt;code class=&quot;highlighter-rouge&quot;&gt;mysql2&lt;/code&gt; adapter.&lt;/p&gt;
</description>
        <pubDate>Sun, 01 Jun 2014 08:00:37 -0700</pubDate>
        <link>http://blog.bitwrangler.com/2014/06/01/the-slow-road.html</link>
        <guid isPermaLink="true">http://blog.bitwrangler.com/2014/06/01/the-slow-road.html</guid>
        
        <category>database</category>
        
        <category>heroku</category>
        
        <category>rails</category>
        
        
      </item>
    
      <item>
        <title>When you need a rabbit, spec it</title>
        <description>&lt;p&gt;On my current project, we're using RabbitMQ. It's a bit of infrastructure that has to be present, and if it isn't, our integration tests will fail with mysterious error messages. We want our tests to be informative, so let's write a test that asserts that we have the requisite infrastructure in place.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;bunny&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;bunny/exceptions&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;describe&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;RabbitMQ&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;is running&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;rabbitmq_is_available&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;should&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;be_true&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;rabbitmq_is_available&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;begin&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;Bunny&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;... amqp configuration uri ...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Bunny&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TCPConnectionFailed&lt;/span&gt;
      &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Run this test and you will know whether the underlying RabbitMQ infrastructure is running.&lt;/p&gt;
</description>
        <pubDate>Fri, 07 Feb 2014 17:03:06 -0800</pubDate>
        <link>http://blog.bitwrangler.com/2014/02/07/when-you-need-a-rabbit-spec-it.html</link>
        <guid isPermaLink="true">http://blog.bitwrangler.com/2014/02/07/when-you-need-a-rabbit-spec-it.html</guid>
        
        <category>agile</category>
        
        <category>devops</category>
        
        <category>testing</category>
        
        
      </item>
    
      <item>
        <title>Speed up your integration tests with a jig</title>
        <description>&lt;p&gt;If you've written enough integration tests (with Capybara &lt;em&gt;et al.&lt;/em&gt;), you must have noticed how much time your tests spend just logging into your web app. Even if it takes 1 second each time, it starts to add up. Here's a solution that I've written several times, now. I create a test &quot;jig&quot; that allows me to authenticate into my application with a single &lt;code&gt;visit&lt;/code&gt;.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AuthenticationJigController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Devise&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SessionsController&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find_by_email!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;set_flash_message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:notice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:signed_in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_flashing_format?&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sign_in&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resource_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;block_given?&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root_url&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;This is a simple override of the normal Devise session controller. Next I add a route that is &lt;strong&gt;only&lt;/strong&gt; present in a development or testing environment. &lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# config/routes.rb&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;devise_scope&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:user&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# DO NOT REMOVE THE if .. end FROM THIS ROUTE&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# IT WILL OPEN A HUGE, GAPING MAW OF A SECURITY HOLE&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# FOR REALZ, NOT EVEN KIDDKING. OKAY?&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;development?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;test?&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/users/auth&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;authentication_jig#create&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;There, that's about it. Now, whenever you need to authenticate to your system, say in a Capybara test, you can replace your multi-line login steps with a single &lt;code&gt;visit &quot;/users/auth?email=user@example.com&quot;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;And you will be authenticated!&lt;/p&gt;

&lt;p&gt;I also use this during development to log in as different test users by creating bookmarks in my browser.&lt;/p&gt;
</description>
        <pubDate>Fri, 07 Feb 2014 16:53:48 -0800</pubDate>
        <link>http://blog.bitwrangler.com/2014/02/07/speed-up-your-integration-tests-with-a-jig.html</link>
        <guid isPermaLink="true">http://blog.bitwrangler.com/2014/02/07/speed-up-your-integration-tests-with-a-jig.html</guid>
        
        <category>agile</category>
        
        <category>ruby</category>
        
        <category>testing</category>
        
        
      </item>
    
      <item>
        <title>Stop thinking like an employee</title>
        <description>&lt;p&gt;A few weeks ago, some of the managers got together for drinks after work. I started to reminisce about an old employer who had, what I thought, was an incredibly unique and reasonable way to handle the “vacation liability” problem. The old firm was a consulting firm, mostly military contracts, in the DC area. We were paid for every hour we billed, and we accrued vacation hours for every hour we were paid. It created an environment where the top performers could rack up so much vacation that they could not use it all. Many companies handle this with the familiar “use it or lose it” policy, which caps the accrued vacation hours to some limit. Instead, the firm let vacation accrue forever, with one modification: When you got a raise, your vacation hours were reduced by exactly the same percentage.&lt;/p&gt;

&lt;p&gt;The singular response from my peers was, “That’s so unfair, you mean they took away your vacation time?”&lt;/p&gt;

&lt;p&gt;sigh.&lt;/p&gt;

&lt;p&gt;I’m not surprised when my reports respond this way, they are not thinking, yet, about the larger concerns of the company. On the other hand, here is how senior management, especially finance, sees accrued vacation: A liability that grows worse with each passing raise. Let me do some quick math to illustrate:&lt;/p&gt;

&lt;p&gt;Let’s say that you are in charge of 100 workers, each of whom receive 100 hours (2.5 weeks) of vacation each year. Let’s also assume that in this mythical company, everyone is paid them same $100K per year. That works out to $50/hour and $500,000/year in payroll costs. Let’s also assume that 10% of your workforce is so dedicated that they don’t take any vacation at all. Just because they haven’t taken the time off, doesn’t mean that they won’t. We want our workers to have a balanced life and come back tanned and refreshed to take on the next big project. Still, there’s that 10%. Your business has a $50,000 liability on its books to cover the eventual expense, or on that sad day when the employee leaves the company and you have to write a check for all of that accrued time. Then, on January 1, everyone gets a 10% raise. It was a good year! Except your accountant is now unhappy. Your 1,000 hours of vacation liability has also grown in value by 10% to $55K. Another year rolls by and another 10% of your workforce doesn’t take vacation. This happens a lot more often than you might think, and instead of staying at 10%, what happens is that there is &lt;strong&gt;always&lt;/strong&gt; about 10% of unclaimed vacation each year. At the end of year 2, your liability is now 2,000 hours ($110K). It was a good year, everyone gets another 10%, and accounting grabs another $11K to cover the added liability. Even with attrition and payouts, this liability is going to keep growing.&lt;/p&gt;

&lt;p&gt;Do you see the problem, now. That is why we have to put some sort of cap on the &lt;em&gt;value&lt;/em&gt; of the vacation liability. We can’t hand out &lt;strong&gt;hours&lt;/strong&gt; when you leave, so there is this ever growing pile of cash that must be kept around, that can’t be put to better use. Just in case. I had a coworker, who after 25 years of service had accumulated months and months of vacation. When he retired, his vacation hours were paid out at this current salary rate, not the one when he earned those hours.&lt;/p&gt;

&lt;p&gt;Do you still think that this arrangement is unfair? Or that it takes hours away from the hands of the hardworking individual contributors? Which would you rather have, an arbitrary cap the just stops earning vacation, or an arrangement where the business is protected from giving away extra cash just as an employee is leaving.&lt;/p&gt;

&lt;p&gt;Good. Now you’re starting to think like a business owner. Now you know that we’re not evil because vacation is limited to 80 hours per year, with a 160 hour cap. It’s because we don’t want the company to go broke if a senior staff member decides to retire.&lt;/p&gt;
</description>
        <pubDate>Tue, 05 Nov 2013 08:45:06 -0800</pubDate>
        <link>http://blog.bitwrangler.com/2013/11/05/stop-thinking-like-an-employee.html</link>
        <guid isPermaLink="true">http://blog.bitwrangler.com/2013/11/05/stop-thinking-like-an-employee.html</guid>
        
        <category>management</category>
        
        
      </item>
    
      <item>
        <title>Why Pivotal Labs</title>
        <description>&lt;p&gt;It is a time-honored tradition for Pivots to blog about their first few months at Pivotal. A typical day at Pivotal is &lt;em&gt;strong&lt;/em&gt; work. It’s different from any previous job. It’s exhausting. After six weeks or so, however, the Pivots find their rhythm. I’m not going to write any more about that. I’ll include some links, below, so you can read them for yourself. I’m here to write about the two-years-later; When most developers are itching to move on to the next big thing. I’m still happily learning new stuff every day.&lt;/p&gt;

&lt;h2 id=&quot;making-better-developers-one-at-a-time&quot;&gt;Making Better Developers, One at A Time&lt;/h2&gt;

&lt;h3 id=&quot;but-first-some-true-stories&quot;&gt;But first… some true stories&lt;/h3&gt;

&lt;p&gt;I was a dot.com’er in the 90’s. I was on a planned sabbatical when the dot.bomb hit and lots of people got laid off. I became a SCUBA instructor in Hawai’i; I couldn’t get any tech work and I just happened to be in Hawai’i at the time. It is the hardest job I’ve ever had. Nothing else comes close. Yes, I got to dive in near-tropical waters (Hawai’i isn’t &lt;em&gt;technically&lt;/em&gt; in the tropics, did you know that?), but I also had to haul 2,000 pounds of gear up and down slippery steps, comfort the deathly sea-sick on the calmest of days, wash dive gear reeking of urine, and smile, even when the rain is pouring, the water is pea-soup, and the tips are scarce. All for an AGI of $18K in my best year. A walk in the park it ain’t, and yet there were other rewards.&lt;/p&gt;

&lt;p&gt;I have certified hundreds of divers. Industry-wide, only a very small percentage become lifetime divers. Most finish the basic course and never dive again. If I dwelt on the number of divers who didn’t continue, I would be quite depressed, but I don’t. I look back on all the ones who are still in it and I smile. I take deep satisfaction in all the lives I changed during those years. That’s why I did it. No paycheck compared with seeing someone’s eyes get &lt;em&gt;this&lt;/em&gt; big at their first sight of a sea turtle, up close. If I could have survived without an income, I would have done it anyway just for the joy of it. I told my friends I was making better divers, who in turn became better human beings.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;At Pivotal, I’m making better developers, one pairing session at a time.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;when-paul-vixie-put-msn-on-the-rtbl&quot;&gt;When Paul Vixie put MSN on the RTBL&lt;/h3&gt;

&lt;p&gt;Paul Vixie and I crossed paths a few times in the late 90’s, when I was a sysadm (predating devops). Paul Vixie and Dave Rand created &lt;a href=&quot;http://en.wikipedia.org/wiki/Mail_Abuse_Prevention_System&quot;&gt;MAPS&lt;/a&gt; to combat spammers. Among other things, a lot of mail servers, open source and otherwise, had open-relay turned on by default, making trouble all over; any mail client, anywhere, could connect to port 25 and the mail server would blindly forward it on to its destination, even outside of the domain.&lt;/p&gt;

&lt;p&gt;In early 1998, MAPS received complaints about msn.com. Following protocol and after a &lt;em&gt;lot&lt;/em&gt; of calls from MAPS and silence from MSN, msn.com was placed on the RTBL. Suddenly, thousands of customers were faced with mysterious error messages about SPAM and their e-mail was not delivered. You can search for the event; you’ll see a lot vitriol against Paul and MAPS over the incident. I remember Paul recounting how, in a tense meeting in Redmond, when the MSN management (finally) admitted that yes, there was a problem but they had a plan (already in place) to fix the problem, Paul opened up his laptop and took msn.com of the RTBL right then and there. The MSN management was shocked. For Paul, it was obvious.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;I don’t hate spam, I just want to make better sysadmins.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;pivotal-labs-mission&quot;&gt;Pivotal Lab’s Mission&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;To transform the way the world builds software&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Heady stuff. But how do we do it? We engage with clients, build product and show them, by doing, that our methods really &lt;em&gt;are&lt;/em&gt; better. We don’t lecture, we don’t offer certifications, there’s no Pivotal University. We “do.” Does every client leave transformed? No, not really, but like my divers, all of them have been affected, and some &lt;em&gt;are&lt;/em&gt; transformed. They go on to do great things after the engagement is over. (And, no matter what else, every one has built something valuable along the way.) Like Paul, we’re not haters. We want to make better developers.&lt;/p&gt;

&lt;p&gt;After 30 years, I’ve worked at more than a few jobs; I’ve been a dishwasher, a sysadmin, and a SCUBA instructor, my .emacs file dates back to 1982. Even so, working at Pivotal is still the best job I’ve ever had.&lt;/p&gt;
</description>
        <pubDate>Sun, 26 May 2013 15:11:57 -0700</pubDate>
        <link>http://blog.bitwrangler.com/2013/05/26/why-pivotal-labs.html</link>
        <guid isPermaLink="true">http://blog.bitwrangler.com/2013/05/26/why-pivotal-labs.html</guid>
        
        <category>Paul Vixie</category>
        
        <category>Pivotal</category>
        
        
      </item>
    
  </channel>
</rss>
