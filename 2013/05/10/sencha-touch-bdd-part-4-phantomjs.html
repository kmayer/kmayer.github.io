<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Sencha Touch BDD - Part 4 - PhantomJS</title>
  <meta name="description" content="Part 3 added jasmine-ajax so we can verify that stores and models react properly to back-end data. We also learned how to use stores to test views, without d...">


  <link rel="stylesheet" href="/css/tufte.css">	
  

  <!-- Google Fonts loaded here depending on setting in _data/options.yml true loads font, blank does not-->
  
    <link href='//fonts.googleapis.com/css?family=Lato:400,400italic' rel='stylesheet' type='text/css'>
  
  <!-- Load up MathJax script if needed ... specify in /_data/options.yml file-->
  
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

  <link rel="canonical" href="http://blog.bitwrangler.com/2013/05/10/sencha-touch-bdd-part-4-phantomjs.html">
  <link rel="alternate" type="application/rss+xml" title="Ken Mayer" href="http://blog.bitwrangler.com/feed.xml" />
</head>

  <body>
    <!--- Header and nav template site-wide -->
<header>
    <nav class="group">
	
		
  	
		
		    
		      <a href="/">blog</a>
		    
	    
  	
		
		    
		      <a href="/about/">About the Global Village Idiot</a>
		    
	    
  	
		
  	
	</nav>
</header>
    <article class="group">
      <h1>Sencha touch bdd - part 4 - phantomjs</h1>
<p class="subtitle">May 10, 2013</p>


<p><a href="/2013/05/05/sencha-touch-bdd-part-3-testing-views-and-mocking-stores.html">Part 3</a> added <code class="highlighter-rouge">jasmine-ajax</code> so we can verify that stores and models react properly to back-end data. We also learned how to use stores to test views, without depending on a back-end server. In <a href="/2013/04/26/sencha-touch-bdd-part-2.html">Part 2</a> I showed you how to unit test Sencha model classes in Jasmine. In <a href="/2013/04/17/sencha-touch-bdd-part-1.html">Part 1</a> I showed you how to set up your Sencha Touch development environment to use the <a href="http://jasmine.github.io">Jasmine</a> JavaScript test framework.</p>

<h3 id="i-hear-its-all-about-the-cloud-these-days">I hear it’s all about the cloud these days</h3>

<p>Not only do we use Test Driven Development, we test all the time (see also <a href="https://www.google.com/search?q=tatft">TATFT</a>). In fact, continuous testing is a key component in a well-run agile practice. Pivotal developed <a href="http://github.com/pivotal-ciborg">ciborg</a> (previously known as Lobot), to automatically deploy <a href="http://jenkins-ci.org/">Jenkins</a> servers in the cloud. Jasmine has a continuous integration target in its rake tasks, <code>rake jasmine:ci</code>. If you’ve never run it before, now is a good time to try it. You’ll notice that Jasmine launches an instance of the Firefox browser, runs the test suite, then reports the results. That’s great if you’ve got (1) Firefox and (2) a machine that has a <em>display</em>! When you run your CI tests in the cloud, the virtual machines may not be configured with a virtual display. Furthermore, the process is terribly slow.</p>

<p>In this installment, we’ll see how to mix in PhantomJS so we can run our Jasmine tests without the need for a visual browser. PhantomJS is orders of magnitude faster, too.</p>

<h3 id="do-the-install-dance">Do the install dance</h3>

<h4 id="add-jasmine-phantom-to-your-codegemfilecode">0. Add ‘jasmine-phantom’ to your <code>Gemfile</code></h4>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gh">index e6b5daf..612fb25 100644
</span><span class="gd">--- a/Gemfile
</span><span class="gi">+++ b/Gemfile
</span><span class="gu">@@ -2,3 +2,4 @@ source "https://rubygems.org"
</span>
 gem "rake"
 gem "jasmine"
<span class="gi">+gem "jasmine-phantom"
</span></code></pre>
</div>

<p>and modify your <code>Rakefile</code> to load the PhantomJS tasks:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gd">--- a/Rakefile
</span><span class="gi">+++ b/Rakefile
</span><span class="gu">@@ -2,6 +2,7 @@
</span> begin
   require 'jasmine'
   load 'jasmine/tasks/jasmine.rake'
<span class="gi">+  load 'jasmine-phantom/tasks.rake'
</span> rescue LoadError
   task :jasmine do
</code></pre>
</div>

<p>Finally, run <code>bundle install</code></p>

<p>Now, when you run <code>rake -T</code> from the command line, you’ll see a new target:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>rake -T jasmine
rake jasmine             <span class="c"># Run specs via server</span>
rake jasmine:ci          <span class="c"># Run continuous integration tests</span>
rake jasmine:phantom:ci  <span class="c"># Run jasmine specs using phantomjs and report the results</span>
</code></pre>
</div>

<h3 id="run-rake">Run rake</h3>

<p>Running it will the phantom:ci target will start the Jasmine continuous integration tests in PhantomJS instead of Firefox.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>rake jasmine:phantom:ci 2&gt;1 /dev/null
<span class="o">[</span>2013-05-06 20:28:15] INFO  WEBrick 1.3.1
<span class="o">[</span>2013-05-06 20:28:15] INFO  ruby 1.9.3 <span class="o">(</span>2012-11-10<span class="o">)</span> <span class="o">[</span>x86_64-darwin12.2.0]
<span class="o">[</span>2013-05-06 20:28:15] INFO  WEBrick::HTTPServer#start: <span class="nv">pid</span><span class="o">=</span>17061 <span class="nv">port</span><span class="o">=</span>60080
Waiting <span class="k">for </span>jasmine server on 60080...

8 specs | 0 failing
</code></pre>
</div>



    </article>
    <span class="print-footer">Sencha Touch BDD - Part 4 - PhantomJS - May 10, 2013 - Ken Mayer</span>
    <footer>
  <hr class="slender">
  <ul class="footer-links">
    <li><a href="mailto:hate@spam.net"><span class="icon-mail"></span></a></li>    
    
      <li>
        <a href="//www.twitter.com/kennethmayer"><span class="icon-twitter"></span></a>
      </li>
    
      <li>
        <a href="//github.com/kmayer"><span class="icon-github"></span></a>
      </li>
    
      <li>
        <a href="//www.linkedin.com/in/kennethlmayer"><span class="icon-linkedin"></span></a>
      </li>
    
      <li>
        <a href="//www.facebook.com/ken.mayer"><span class="icon-facebook"></span></a>
      </li>
    
      <li>
        <a href="/feed"><span class="icon-feed"></span></a>
      </li>
      
  </ul>
<div class="credits">
<span>&copy; 1995-2016 &nbsp;&nbsp;KEN MAYER</span></br> <br>
<span>This site created with the <a href="//github.com/clayh53/tufte-jekyll">Tufte theme for Mutterings of the Global Village Idiot </a> in <a href="//jekyllrb.com">Jekyll</a>.</span> 
</div>  
</footer>
  </body>
</html>
